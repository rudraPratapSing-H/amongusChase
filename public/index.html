<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Vent Chase - The Story</title>
    <link rel="stylesheet" href="story_style.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&family=Roboto:wght@400&display=swap" rel="stylesheet">
</head>
<body>

<div class="story-container">
    <div class="image-container" id="image-container">
        <!-- Images will be dynamically added here by JavaScript -->
    </div>
    
    <div class="dialogue-box">
        <p class="story-text" id="story-text-element"></p>
        <button id="nav-button">Next</button>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- Story Content ---
        // Each object represents a scene with its image and text.
        const scenes = [
            {
                image: 'images/Scen_1.jpg',
                text: 'In the cold silence of space, a shadow hides among the stars. An alien impostor boards the vessel, disguised as one of the crew.'
            },
            {
                image: 'images/Scen_2.jpg',
                text: 'At first, no one suspects. But soon—systems fail, engines sputter, and trust fractures. The impostor strikes without mercy… one by one, the crew falls.'
            },
            {
                image: 'images/Scen_3.jpg',
                text: 'When the last breath fades, the impostor claims the ship’s heart—the reactor core. With alarms wailing across empty halls, the predator prepares its escape.'
            },
            {
                image: 'images/Scen_4.jpg',
                text: 'Yet… all is not lost. Deep within the ship, a stasis pod hisses open. A lone crewmate awakens, ready to fight back against the impostor.'
            },
            {
                image: 'images/Scen_5.jpg',
                text: 'They find the silence of death… the journal of a fallen friend… and the truth of betrayal.'
            },
            {
                image: 'images/Scen_6.jpg',
                text: 'Now armed and resolute,the survivor rises with a single mission:'
            },
            {
                image: 'images/Scen_7.jpg',
                text: 'Hunt the impostor. Stop its escape. Avenge the crew… or die as the last casualty.'
            }
        ];

        // --- DOM Elements ---
        const imageContainer = document.getElementById('image-container');
        const storyTextElement = document.getElementById('story-text-element');
        const navButton = document.getElementById('nav-button');

        let currentSceneIndex = 0;

        // --- Functions ---

        /**
         * Pre-loads all scene images into the DOM and sets them to be hidden.
         */
        function initializeImages() {
            scenes.forEach((scene, index) => {
                const img = document.createElement('img');
                img.src = scene.image;
                img.alt = `Scene ${index + 1}`;
                img.classList.add('scene-image');
                // Add a fallback in case an image fails to load
                img.onerror = () => {
                    img.src = `https://placehold.co/800x600/0d0d1a/00ffff?text=Scene+${index+1}+Not+Found`;
                };
                imageContainer.appendChild(img);
            });
        }

        /**
         * Displays a specific scene by its index.
         * @param {number} index - The index of the scene to show.
         */
        function showScene(index) {
            // Update image visibility
            const allImages = document.querySelectorAll('.scene-image');
            allImages.forEach((img, imgIndex) => {
                if (imgIndex === index) {
                    img.classList.add('active');
                } else {
                    img.classList.remove('active');
                }
            });

            // Update text
            storyTextElement.textContent = scenes[index].text;

            // Update button
            if (index === scenes.length - 1) {
                navButton.textContent = 'Begin Mission';
            } else {
                navButton.textContent = 'Next';
            }
        }

        // --- Event Listeners ---

        navButton.addEventListener('click', () => {
            if (currentSceneIndex < scenes.length - 1) {
                // If not the last scene, advance to the next one
                currentSceneIndex++;
                showScene(currentSceneIndex);
            } else {
                // If on the last scene, clicking "Begin Mission" goes to the game
                // *** THIS LINE HAS BEEN UPDATED ***
                window.location.href = 'main_game.html?from=story';
            }
        });

        // --- Initial Setup ---
        initializeImages();
        showScene(0); // Show the first scene on page load
    });
</script>

</body>
</html>
